# Быстрый старт

## Быстрая проверка работы

### 1. Запуск STUN/Rendezvous сервера

```bash
go run *.go -mode=server -port=3478
```

### 2. Запуск первого клиента

В новом терминале:
```bash
go run *.go -mode=client -stun=localhost:3478 -peer=alice -target=bob
```

### 3. Запуск второго клиента

В еще одном терминале:
```bash
go run *.go -mode=client -stun=localhost:3478 -peer=bob -target=alice
```

### 4. Общение

После установления соединения (вы увидите "P2P Connection Established!"), вы можете отправлять сообщения. Введите текст и нажмите Enter.

Для выхода введите `quit`.

## Сборка

```bash
go build -o p2p-app *.go
```

Запуск скомпилированной версии:
```bash
./p2p-app -mode=server -port=3478
```

## Параметры командной строки

### Сервер
- `-mode=server` - режим сервера
- `-port=3478` - порт для прослушивания (по умолчанию 3478)

### Клиент
- `-mode=client` - режим клиента
- `-stun=host:port` - адрес STUN/Rendezvous сервера (обязательно)
- `-peer=ID` - ваш идентификатор (обязательно, должен быть уникальным)
- `-target=ID` - идентификатор целевого пира (обязательно)

## Примеры

### Локальная сеть

```bash
# Сервер
go run *.go -mode=server -port=3478

# Клиент 1
go run *.go -mode=client -stun=192.168.1.100:3478 -peer=alice -target=bob

# Клиент 2
go run *.go -mode=client -stun=192.168.1.100:3478 -peer=bob -target=alice
```

### Удаленный сервер

```bash
# Клиент 1
go run *.go -mode=client -stun=stun.example.com:3478 -peer=alice -target=bob

# Клиент 2
go run *.go -mode=client -stun=stun.example.com:3478 -peer=bob -target=alice
```

## Важные замечания

1. **Оба клиента должны запуститься примерно одновременно** для успешного hole punching
2. **STUN сервер должен быть доступен обоим клиентам** (публичный IP или в одной сети)
3. **Идентификаторы пиров должны быть уникальными** и совпадать между клиентами
4. После установления соединения клиенты общаются **напрямую**, без участия сервера

## Устранение проблем

### Клиенты не могут соединиться

- Проверьте, что STUN сервер запущен и доступен
- Убедитесь, что оба клиента используют одинаковый адрес STUN сервера
- Проверьте, что идентификаторы пиров совпадают (`-peer=alice -target=bob` на одном и `-peer=bob -target=alice` на другом)
- Убедитесь, что клиенты запущены примерно одновременно

### Ошибка "timeout waiting for peer response"

- Это может означать, что hole punching не удался
- Попробуйте запустить клиентов снова одновременно
- Проверьте настройки NAT (для тестировани ghjcvjя с NAT)

### Сообщения не доходят

- Убедитесь, что соединение установлено (вы видите "P2P Connection Established!")
- Проверьте, что вы отправляете сообщения после установления соединения
- Убедитесь, что оба клиента работают

## Подробная документация

См. [README.md](README.md) для подробного объяснения всех терминов и алгоритмов.

См. [TESTING.md](TESTING.md) для инструкций по тестированию и записи сетевого трафика.



